<div class="page-wrap">
  <div class="profile-card" *ngIf="infoPerson" [class.editing]="editMode">

    <!-- HEADER sa pozadinskom slikom -->
    <div class="profile-header">
      <div class="overlay"></div>
      <div class="avatar-wrap">
        <img
          [src]="editMode ? (imageBase64 || getImage(infoPerson.profileImagePath)) : getImage(infoPerson.profileImagePath)"
          alt="Profile"
          class="profile-image"
        />
      </div>
      <h2 class="name">{{ infoPerson.name }} {{ infoPerson.surname }}</h2>
    </div>

    <!-- VIEW MODE -->
    <div *ngIf="!editMode" class="content">
      <div class="profile-section">
        <h3>Motto</h3>
        <p class="section-text" [class.placeholder]="!infoPerson.motto">
          {{ infoPerson.motto || 'No motto provided' }}
        </p>
      </div>

      <div class="profile-section">
        <h3>Bio</h3>
        <p class="section-text" [class.placeholder]="!infoPerson.biography">
          {{ infoPerson.biography || 'No bio provided' }}
        </p>
      </div>

      <div class="actions">
        <button class="btn btn-primary" (click)="enableEditMode()">Change profile</button>
      </div>
    </div>

    <!-- EDIT MODE -->
    <div *ngIf="editMode" class="content edit-grid">
      <div class="profile-section editor">
        <label class="file-label">
          <input type="file" (change)="onFileSelected($event)" />
          Change to
        </label>
      </div>

      <div class="profile-section">
        <h3>Basic info</h3>
        <div class="form-grid">
          <div class="form-row">
            <label>Name</label>
            <input type="text" [(ngModel)]="editPerson.name" placeholder="Name" />
          </div>
          <div class="form-row">
            <label>Lastname</label>
            <input type="text" [(ngModel)]="editPerson.surname" placeholder="Lastname" />
          </div>
          <div class="form-row full">
            <label>Motto</label>
            <input type="text" [(ngModel)]="editPerson.motto" placeholder="Motto" />
          </div>
          <div class="form-row full">
            <label>Bio</label>
            <textarea rows="5" [(ngModel)]="editPerson.biography" placeholder="Bio"></textarea>
          </div>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-primary" (click)="updateProfile()">Save</button>
        <button class="btn btn-ghost" (click)="cancelEdit()">Cancel</button>
      </div>
    </div>

  </div>
</div>
